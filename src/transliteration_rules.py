# src/transliteration_rules.py

# ูุฐุง ุงูููู ูุญุชูู ุนูู ููุงุนุฏ ุงูููุญุฑุฉ ุงูุฃุณุงุณูุฉ ููุดุฑูุน TSO.
# ุชู ุชุตูููู ููููู ูุงุจูุงู ููุชูุณุน ูุงุณุชูุนุงุจ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ ูุงููุบุงุช ุงูููุฏุซุฑุฉ.

# ==============================================================================
# 1. ุงูููุงุนุฏ ุงูุงูุชุฑุงุถูุฉ ูููุถุน "ุงูุจุณูุท" (General/Common Use)
#    ุชูุฏู ูุฐู ุงูููุงุนุฏ ุฅูู ุงุญุชูุงุก ุนุงุฏุงุช ุงููุณุชุฎุฏููู ุงูุดุงุฆุนุฉ ูู ุงูููุญุฑุฉ ุงููุงุชูููุฉ
#    ูุชูุฌูููู ุจุฐูุงุก ูุญู ุชูุซูู TSO ุงูููุถู.
# ==============================================================================

BASIC_TRANSLITERATION_MAP = {
    'ุง': 'a',
    'ุจ': 'b',
    'ุช': 't',
    'ุซ': 'th',  # ุดุงุฆุน ูู ุงูุฏุฑุฏุดุฉุ ูููู ุชูุฌููู ูุงุญูุงู ูู 'แนฏ'
    'ุฌ': 'j',   # ุฃู 'g' ุญุณุจ ุงูููุฌุฉุ ูููู ุฃู ูููู ุฎูุงุฑุงู ูุงุจูุงู ููุชุฎุตูุต
    'ุญ': '7',   # ุดุงุฆุน ุฌุฏุงู ูู ุงูุฏุฑุฏุดุฉ ุงูุนุฑุจูุฉ ุงููุงุชูููุฉ
    'ุฎ': '5',   # ุดุงุฆุน ุฌุฏุงู
    'ุฏ': 'd',
    'ุฐ': 'dh',  # ุดุงุฆุนุ ูููู ุชูุฌููู ูุงุญูุงู ูู 'แธ'
    'ุฑ': 'r',
    'ุฒ': 'z',
    'ุณ': 's',
    'ุด': 'sh',
    'ุต': 's',   # ุชุจุณูุท ููุตุงุฏ ุงูููุฎูุฉุ ูุน ุฅููุงููุฉ ุงูุชูุฌูู ูู 'แนฃ'
    'ุถ': 'd',   # ุชุจุณูุท ููุถุงุฏ ุงูููุฎูุฉุ ูุน ุฅููุงููุฉ ุงูุชูุฌูู ูู 'แธ'
    'ุท': 't',   # ุชุจุณูุท ููุทุงุก ุงูููุฎูุฉุ ูุน ุฅููุงููุฉ ุงูุชูุฌูู ูู 'แนญ'
    'ุธ': 'z',   # ุชุจุณูุท ููุธุงุก ุงูููุฎูุฉุ ูุน ุฅููุงููุฉ ุงูุชูุฌูู ูู 'แบ'
    'ุน': '3',   # ุดุงุฆุน ุฌุฏุงู ูู ุงูุฏุฑุฏุดุฉุ ุณูุชู ุงูุชูุฌูู ูู 'ษ' ูู ุงููุถุน ุงูุฃูุงุฏููู
    'ุบ': '3\'',  # ุฃู 'gh'
    'ู': 'f',
    'ู': '9',   # ุดุงุฆุน ุฌุฏุงู ูู ุงูุฏุฑุฏุดุฉุ ุณูุชู ุงูุชูุฌูู ูู 'q'
    'ู': 'k',
    'ู': 'l',
    'ู': 'm',
    'ู': 'n',
    'ู': 'h',
    'ู': 'w',   # ูููุงู ุงูุตุญูุญุฉ ุฃู ูุฌุฒุก ูู ุญุฑู ูุฏ (ุณูุชู ุงูุชุนุงูู ูุน ุงููุฏูุฏ ุจุฐูุงุก ูู ุงููุญุฑู)
    'ู': 'y',   # ูููุงุก ุงูุตุญูุญุฉ ุฃู ูุฌุฒุก ูู ุญุฑู ูุฏ
    'ุฉ': 'a',   # ุงูุชุงุก ุงููุฑุจูุทุฉ (ูููู ุฃู ุชููู 'ah' ุฃู 'eh' ูุฎูุงุฑุงุช ุฅุถุงููุฉ)
    'ุก': '',    # ุงูููุฒุฉ (ุบุงูุจุงู ูุง ุชูููู ูู ุงูููุญุฑุฉ ุงูุจุณูุทุฉ ุฃู ุชูุนุงูุฌ ุณูุงููุงู)
    'ุฃ': 'a',   # ุฃูู ุจููุฒุฉ
    'ุฅ': 'i',   # ุฃูู ุจููุฒุฉ
    'ุข': 'aa',  # ุฃูู ููุฏูุฏุฉ (ุชูุซูู ุจุณูุท)
    'ู': 'a',   # ุฃูู ููุตูุฑุฉ
    # ุนูุงูุงุช ุงูุชุดููู ูุงูุญุฑูุงุช (ุนุงุฏุฉู ูุง ุชูููู ูู ุงูููุญุฑุฉ ุงูุจุณูุทุฉ)
    'ู': '', 'ู': '', 'ู': '', 'ู': '', 'ู': '', 'ู': '', 'ู': '', 'ู': '',
    # ุนูุงูุงุช ุงูุชุฑููู ูุงูุฃุฑูุงู (ุชุจูู ููุง ูู)
    '.': '.', ',': ',', '?': '?', '!': '!', ' ': ' ', '0': '0', '1': '1', # ... ูููุฐุง
}

# ==============================================================================
# 2. ุงูููุงุนุฏ ูููุถุน "ุงูุฃูุงุฏููู" (Academic/Precise TSO)
#    ูุฐู ุงูููุงุนุฏ ุชุณุชุฎุฏู ุชูุซููุงุช ุฃูุซุฑ ุฏูุฉ ููุฃุตูุงุชุ ูุชุชุถูู ุฑููุฒุงู ุฎุงุตุฉ (IPA ุฃู ูุง ุดุงุจู).
#    ููุง ุณูุฏูุฌ ุฑุคูุชู ูุญุฑู ุงูุนูู (ษ) ูุงูุฃุญุฑู ุงูุณุงููุฉ ุงูุฃุฎุฑู.
# ==============================================================================

ACADEMIC_TRANSLITERATION_MAP = {
    'ุง': 'ฤ',   # ุฃูู ููุฏูุฏุฉ
    'ุจ': 'b',
    'ุช': 't',
    'ุซ': 'แนฏ',   # ุฑูุฒ ุฃูุงุฏููู ุฏููู (ูุซู th ูู IPA)
    'ุฌ': 'j',   # ุฃู 'วง'
    'ุญ': 'แธฅ',   # ุฑูุฒ ุฃูุงุฏููู ุฏููู (H with dot below)
    'ุฎ': 'kh',  # ุฃู 'แธซ'
    'ุฏ': 'd',
    'ุฐ': 'แธ',   # ุฑูุฒ ุฃูุงุฏููู ุฏููู (d with bar below)
    'ุฑ': 'r',
    'ุฒ': 'z',
    'ุณ': 's',
    'ุด': 'ลก',   # ุฑูุฒ ุฃูุงุฏููู ุฏููู (s with caron)
    'ุต': 'แนฃ',   # ุฑูุฒ ุฃูุงุฏููู ุฏููู (s with dot below)
    'ุถ': 'แธ',   # ุฑูุฒ ุฃูุงุฏููู ุฏููู (d with dot below)
    'ุท': 'แนญ',   # ุฑูุฒ ุฃูุงุฏููู ุฏููู (t with dot below)
    'ุธ': 'แบ',   # ุฑูุฒ ุฃูุงุฏููู ุฏููู (z with dot below)
    'ุน': 'ษ',   # ุงุณุชุฎุฏุงู ุฅุจุณูููู (epsilon) ููุง ุงูุชุฑุญุช
    'ุบ': 'gh',  # ุฃู 'ฤก'
    'ู': 'f',
    'ู': 'q',
    'ู': 'k',
    'ู': 'l',
    'ู': 'm',
    'ู': 'n',
    'ู': 'h',
    'ู': 'w',   # ูููุงู ุงูุตุญูุญุฉ
    'ู': 'y',   # ูููุงุก ุงูุตุญูุญุฉ
    'ุฉ': 'at',  # ุงูุชุงุก ุงููุฑุจูุทุฉ (ูู ุงูููู 'a', ูู ุงููุตู 'at') - ูููู ุฃู ูููู ูุฐุง ุณูุงููุงู
    'ุก': 'สพ',   # ุงูููุฒุฉ ูููู ุญูุฌุฑู (glottal stop)
    'ุฃ': 'สพa',  # ุฃูู ุจููุฒุฉ
    'ุฅ': 'สพi',  # ุฃูู ุจููุฒุฉ
    'ุข': 'ฤ',   # ุฃูู ููุฏูุฏุฉ (ุชูุซูู ุฏููู)
    'ู': 'ฤ',   # ุฃูู ููุตูุฑุฉ (ุชูุซูู ุฏููู)
    'ู': 'ลซ',   # ูุงู ูุฏ (ุฅุฐุง ุฌุงุกุช ุจุนุฏ ุญุฑู ูุชุญุฑู) - ุชุญุชุงุฌ ููุนุงูุฌุฉ ุณูุงููุฉ
    'ู': 'ฤซ',   # ูุงุก ูุฏ (ุฅุฐุง ุฌุงุกุช ุจุนุฏ ุญุฑู ูุชุญุฑู) - ุชุญุชุงุฌ ููุนุงูุฌุฉ ุณูุงููุฉ
    # ุงูุฃุญุฑู ุงูุณุงููุฉ ุงูุฅุถุงููุฉ (ุณูุชู ุชูุณูุนูุง ูุงุญูุงู ุจูุงุกู ุนูู ุงูุฃุจุญุงุซ ูุงููุบุงุช ุงูููุฏุซุฑุฉ)
    # ูุซุงู: '๐ค' (ุฃูู ููููููุฉ) : 'สพ'
    # '๐ค' (ุญูุช ููููููุฉ) : 'แธฅ'
    # '๐ค' (ุนูู ููููููุฉ) : 'สฟ' ุฃู 'ษ'
}

# ==============================================================================
# 3. ููุงููุณ ุงูุชุญููู ุงูุนูุณู (ูู ุงููุงุชููู ุฅูู ุงูุนุฑุจู/ุงูุณุงูู)
#    ูุฐู ุงูููุงููุณ ุถุฑูุฑูุฉ ููุชุญููู ูู ุงูููุญุฑุฉ ุงููุงุชูููุฉ ุฅูู ุงูุฃุจุฌุฏูุงุช ุงูุฃุตููุฉ.
#    ุชุชุทูุจ ูุนุงูุฌุฉ ุฏูููุฉ ููุชุนุงูู ูุน ุงูุบููุถ ูุงูุฃุญุฑู ุงููุฑูุจุฉ.
# ==============================================================================

# ููุงุญุธุฉ: ุจูุงุก ุงูููุงููุณ ุงูุนูุณูุฉ ุฃูุซุฑ ุชุนููุฏุงู ูุฃูู ูุฏ ูููู ููุงู ุฃูุซุฑ ูู ุญุฑู ูุงุชููู
# ููุซู ุญุฑูุงู ุนุฑุจูุงู ูุงุญุฏุงู (ูุซู 's' ูู 'ุณ' ู 'ุต').
# ุณูููู ุจุจูุงุก ูุฐู ุงูููุงููุณ ุจุดูู ูุณูุญ ุจุงูุชุนุงูู ูุน ุงูุฃุญุฑู ุงููุฑูุจุฉ ุฃููุงู
# (ูุซู 'sh' ูุจู 's') ููุนุงูุฌุฉ ุงูุบููุถ.

# ูุฐุง ูุฌุฑุฏ ูููู ูุจุฏุฆูุ ุณูุชู ุชุทููุฑู ุจุดูู ุฃูุจุฑ ูู transliteration_engine.py
# ูุถูุงู ุงูุชุนุงูู ุงูุตุญูุญ ูุน ุงูุฃุญุฑู ุงููุฑูุจุฉ ูุงูุบููุถ.

REVERSE_BASIC_TRANSLITERATION_MAP = {
    'th': 'ุซ', 'sh': 'ุด', 'dh': 'ุฐ', 'gh': 'ุบ',
    '7': 'ุญ', '5': 'ุฎ', '3': 'ุน', '9': 'ู',
    'a': 'ุง', 'b': 'ุจ', 't': 'ุช', 'j': 'ุฌ', 'd': 'd', 'r': 'r', 'z': 'z',
    's': 'ุณ', 'f': 'ู', 'q': 'ู', 'k': 'ู', 'l': 'l', 'm': 'm', 'n': 'n',
    'h': 'ู', 'w': 'w', 'y': 'ู',
    'aa': 'ุข', # ููุชุนุงูู ูุน ุงููุฏูุฏ
    # ... ุณูุชู ุฅุถุงูุฉ ุงููุฒูุฏ ูุชุญุฏูุฏ ุงูุฃููููุงุช
}

REVERSE_ACADEMIC_TRANSLITERATION_MAP = {
    'แนญ': 'ุท', 'แนฃ': 'ุต', 'แธ': 'ุถ', 'แบ': 'ุธ',
    'แธฅ': 'ุญ', 'แนฏ': 'ุซ', 'แธ': 'ุฐ', 'ลก': 'ุด',
    'ษ': 'ุน', 'สพ': 'ุก', 'สฟ': 'ุน', # ูููู ุฃู ูููู 'สฟ' ุฎูุงุฑุงู ุขุฎุฑ ูู 'ุน'
    'ฤ': 'ุง', 'ฤซ': 'ู', 'ลซ': 'ู', # ูููุฏูุฏ
    'kh': 'ุฎ', 'gh': 'ุบ',
    'a': 'ุง', 'b': 'ุจ', 't': 'ุช', 'j': 'ุฌ', 'd': 'ุฏ', 'r': 'r', 'z': 'z',
    's': 'ุณ', 'f': 'ู', 'q': 'ู', 'k': 'ู', 'l': 'l', 'm': 'm', 'n': 'n',
    'h': 'ู', 'w': 'w', 'y': 'y',
    # ... ุณูุชู ุฅุถุงูุฉ ุงููุฒูุฏ ูุชุญุฏูุฏ ุงูุฃููููุงุชุ ูุฑููุฒ ุงููุบุงุช ุงููุฏููุฉ
    # ูุซุงู: '๐ค' (ุฃูู ููููููุฉ) : 'สพ'
    # '๐ค' (ุญูุช ููููููุฉ) : 'แธฅ'
    # '๐ค' (ุนูู ููููููุฉ) : 'สฟ' ุฃู 'ษ'
}

# ==============================================================================
# 4. ูุธููุฉ ูุณุงุนุฏุฉ ูุชุญููู ุงูููุงุนุฏ ุงููุฎุตุตุฉ
#    ูุฐู ุงููุธููุฉ ุณุชููู ุฌุฒุกุงู ูู ุขููุฉ "ุงูููุญุงุช ุงูุดุฎุตูุฉ".
# ==============================================================================

import json
import os

def load_custom_profile_rules(profile_path):
    """
    ุชุญููู ููุงุนุฏ ุงูููุญุฑุฉ ุงููุฎุตุตุฉ ูู ููู JSON.
    ูุชููุน ุฃู ูุญุชูู ุงูููู ุนูู ููุชุงุญูู: 'to_latin_map' ู 'from_latin_map'.
    """
    if not os.path.exists(profile_path):
        print(f"ุฎุทุฃ: ุงูููู ุงูุดุฎุตู ุงููุฎุตุต '{profile_path}' ุบูุฑ ููุฌูุฏ.")
        return {}, {}
    try:
        with open(profile_path, 'r', encoding='utf-8') as f:
            profile_data = json.load(f)
            # ุงูุชุฃูุฏ ูู ูุฌูุฏ ุงูููุงุชูุญ ุงููุชููุนุฉ
            to_latin_map = profile_data.get('to_latin_map', {})
            from_latin_map = profile_data.get('from_latin_map', {})
            return to_latin_map, from_latin_map
    except json.JSONDecodeError:
        print(f"ุฎุทุฃ: ุงูููู '{profile_path}' ููุณ ููู JSON ุตุงูุญุงู.")
        return {}, {}
    except Exception as e:
        print(f"ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน ุฃุซูุงุก ุชุญููู ุงูููู ุงูุดุฎุตู: {e}")
        return {}, {}
